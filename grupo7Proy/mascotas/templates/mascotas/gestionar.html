{% extends 'base.html' %}

{% block title %}Gestionar Mascotas{% endblock %}

{% block content %}
<h1>Gestionar Mascotas</h1>

<a href="{% url 'mascotas:agregar' %}">Agregar Nueva Mascota</a>

<table class="datatable">
    <thead>
        <tr>
            <th>Nombre</th>
            <th>Especie</th>
            <th>Raza</th>
            <th>Edad</th>
            <th>Sexo</th>
            <th>Estado</th>
            <th>Fecha Ingreso</th>
            <th>Adoptante</th>
            <th>Acciones</th>
        </tr>
    </thead>
    <tbody>
        {% for mascota in mascotas %}
            <tr>
                <td>{{ mascota.nombre }}</td>
                <td>{{ mascota.get_especie_display }}</td>
                <td>{{ mascota.raza }}</td>
                <td>{{ mascota.edad }} años</td>
                <td>{{ mascota.get_sexo_display }}</td>
                <td>{{ mascota.get_estado_adopcion_display }}</td>
                <td>{{ mascota.fecha_ingreso|date:"d/m/Y" }}</td>
                <td>
                    {% if mascota.adoptante %}
                        {{ mascota.adoptante.get_full_name }}
                    {% else %}
                        -
                    {% endif %}
                </td>
                <td>
                    <a href="{% url 'mascotas:detalle' mascota.id %}">Ver</a>
                    <a href="{% url 'mascotas:editar' mascota.id %}">Editar</a>
                    <a href="{% url 'mascotas:eliminar' mascota.id %}" 
                       onclick="return confirm('¿Estás seguro de que quieres eliminar a {{ mascota.nombre }}?')" 
                       style="color: red;">Eliminar</a>
                </td>
            </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}
